{%extends 'all-insta/base.html'%}

{% block content %}
{{block.super}}

<br><br><br>
<br><br>
<div class="container text-center">
    
    
    <div class="row">
        {% for pic in Images %}
        
        <div class="col-12" >
            {% if profile.profile_photo %}
            
                    <img src="{{profile.profile_photo.url}}" alt="My profile picture" style="border-radius: 50%; width: 5%; margin-right: 60%;">
                    {%else%}
                    <img  src="https://st2.depositphotos.com/1104517/11965/v/600/depositphotos_119659092-stock-illustration-male-avatar-profile-picture-vector.jpg"
                    class="card-img-top" alt="My profile picture" style="border-radius: 50%; width: 5%; margin-right: 60%;">
                    
                    <div style="margin-right: 47%; margin-top: -30px;"><a class='btn btn-default' href="/profile" style="font-weight: 700;">{{pic.user}}</a></div>
            {% endif %}


            <div data-toggle="modal" data-target="#showPicModal{{pic.id}}">
                <img class="images" src="{{pic.image.url}}" alt="image1">
            </div>
            <form action = "{% url 'like-image' %}"   method='POST' >
                {% csrf_token %}
                <input type="hidden" name="image_id" value="{{pic.id}}">
                {%if user not in pic.liked.all %}
                <button class="btn-light" type="submit" style="border: none; margin-right: 63%;"><i class="far fa-heart text-dark" ></i></button>
                
                {% else %}
                <button class="btn-light" type="submit" style="border: none; margin-right: 63%;"><i class="far fa-heart text-danger" ></i></button>
                {% endif %}
          </form>
          <strong style=" margin-right: 60%;">{{pic.liked.all.count}}likes</strong>
          
          
        </div>
        


        <div class="modal fade" id="showPicModal{{pic.id}}" tabindex="-1" role="dialog"
            aria-labelledby="exampleModalCenterName" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-name" id="modalPicName">{{pic.name}}</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <img src="{{pic.image.url}}" class="images" alt="{{pic.photo_name}}">
                        <p class="text-centre">{{pic.photo_caption}}</p>
                        <div class="row">


                        </div>

                        <p>Date Posted: {{pic.posted_at}}</p>

                    </div>
                    <div class="modal-footer">
                        <input class="form-control" type="text" value="{{pic.photo.url}}" id="{{pic.id}}.url">
                        <button class="btn-btn-success">Copy link</button>
                    </div>
                </div>
            </div>
        </div>

        {% endfor %}

    </div>

</div>

{% endblock %}

